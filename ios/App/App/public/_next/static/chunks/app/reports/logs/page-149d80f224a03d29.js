(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[244],{55339:(e,t,a)=>{Promise.resolve().then(a.bind(a,99046))},99046:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(95155),o=a(12115),l=a(68437),i=a(35695),r=a(37101),n=a(30285),d=a(68718),m=a(26597);a(76118);var u=a(83013),h=a(6616),c=a(58186);function x(){var e;let{sessions:t}=(0,h.t)(),{user:a,loading:x}=(0,l.A)(),f=(0,i.useRouter)(),g={name:(null==a||null==(e=a.email)?void 0:e.split("@")[0])||"Student Driver",dob:"Jan 1, 2008",permitDate:"Jan 1, 2024",totalHoursGoal:50,nightHoursGoal:10};(0,o.useEffect)(()=>{x||a||f.push("/login")},[a,x,f]);let{totalHours:v,totalMiles:y,nightHours:b}=(0,o.useMemo)(()=>{let e=t.reduce((e,t)=>(e.totalDuration+=t.duration,e.totalMiles+=t.miles,"Night"===t.timeOfDay&&(e.nightDuration+=t.duration),e),{totalDuration:0,totalMiles:0,nightDuration:0});return{totalHours:(e.totalDuration/3600).toFixed(1),totalMiles:e.totalMiles.toFixed(1),nightHours:(e.nightDuration/3600).toFixed(1)}},[t]);return x||!a?(0,s.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,s.jsx)("div",{className:"text-2xl",children:"Loading..."})}):(0,s.jsx)("main",{className:"min-h-screen bg-background text-foreground",children:(0,s.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,s.jsxs)("header",{className:"mb-8 flex flex-col md:flex-row justify-between md:items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(c.A,{}),(0,s.jsx)("h1",{className:"text-4xl font-bold font-headline tracking-tight text-primary",children:"Full Driving Log"})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"A complete record of all your driving sessions."})]}),(0,s.jsxs)(n.$,{onClick:()=>{let e=new m.Ay;e.setFontSize(22),e.setFont("helvetica","bold"),e.text("Drive-Track Driving Log",15,22),e.setFontSize(10),e.setFont("helvetica","normal"),e.text("Report Generated: ".concat((0,u.GP)(new Date,"MMM d, yyyy")),15,28),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Driver Information",15,45),e.setFont("helvetica","normal"),e.autoTable({startY:48,head:[["Name","Date of Birth","Permit Issue Date","Total Goal (hrs)","Night Goal (hrs)"]],body:[[g.name,g.dob,g.permitDate,g.totalHoursGoal,g.nightHoursGoal]],theme:"grid",styles:{fontSize:10}}),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Overall Progress",15,e.lastAutoTable.finalY+10),e.setFont("helvetica","normal"),e.autoTable({startY:e.lastAutoTable.finalY+13,head:[["Total Hours","Total Miles","Night Hours"]],body:[[v,y,b]],theme:"grid",styles:{fontSize:10}}),e.autoTable({startY:e.lastAutoTable.finalY+10,head:[["Date","Duration (hrs)","Miles","Time of Day","Weather","Road Types"]],body:t.map(e=>[(0,u.GP)(new Date(e.date),"MMM d, yyyy"),(e.duration/3600).toFixed(1),e.miles.toFixed(1),e.timeOfDay,e.weather,e.roadTypes.join(", ")]),theme:"striped",headStyles:{fillColor:[38,38,180]},styles:{fontSize:9}}),e.save("driving-log.pdf")},className:"mt-4 md:mt-0",children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Download PDF"]})]}),(0,s.jsx)("div",{className:"rounded-lg border",children:(0,s.jsx)(r.A,{sessions:t})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[644,930,291,829,171,2,666,27,106,441,684,358],()=>t(55339)),_N_E=e.O()}]);